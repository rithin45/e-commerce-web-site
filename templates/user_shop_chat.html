{% include 'user_header.html' %}
</head>
<body style="background-image: url('/static/assets/img/www.jpg'); background-size: cover; background-position: center; padding: 0; margin: 0; height: calc(100vh - 100px); color: rgb(0, 0, 0);">

<div style="max-width: 600px; margin: 20px auto; padding: 20px; background-color: #ffffff; border-radius: 8px; box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);">
    <h3 style="color: rgb(0, 0, 0); text-align: center; margin-bottom: 20px;">Chat Box</h3>
    <div>
        <!-- Chat messages display -->
        <div style="display: flex; flex-direction: column; max-height: 400px; overflow-y: auto; padding-bottom: 15px;">
            {% for row in data['msr'] %}
                {% if row['sender_id']|int == session['lid']|int %}
                    <!-- Message sent by logged-in user/shop -->
                    <div style="display: flex; justify-content: end; margin-bottom: 10px;">
                        <div style="background-color: #d1e7dd; color: rgb(0, 0, 0); border-radius: 15px; padding: 10px; max-width: 75%; text-align: right;">
                            {{ row['message'] }}
                        </div>
                    </div>
                {% else %}
                    <!-- Message received by logged-in user/shop -->
                    <div style="display: flex; justify-content: start; margin-bottom: 10px;">
                        <div style="background-color: #cfe2ff; color: rgb(0, 0, 0); border-radius: 15px; padding: 10px; max-width: 75%; text-align: left;">
                            {{ row['message'] }}
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>

        <!-- Message input form -->
        <form method="post" style="margin-top: 20px;">
            <div style="display: flex; border: 1px solid #007bff; border-radius: 5px;">
                <input type="text" name="msg" placeholder="Type your message..." required 
                       style="flex-grow: 1; padding: 10px; border: none; border-radius: 5px 0 0 5px; outline: none;">
                <button type="submit" name="submit" 
                        style="background-color: #007bff; color: #ffffff; padding: 10px 15px; border: none; border-radius: 0 5px 5px 0; cursor: pointer;">
                    Send Message
                </button>
            </div>
        </form>
    </div>
</div>

{% include 'footer.html' %}
</body>
