{% include 'shop_header.html' %}
<style>
 
    .chat-input {
        border: 1px solid #007bff;
        border-radius: 5px;
        padding: 10px;
    }
    .message {
        border-radius: 15px;
        padding: 10px;
        margin-bottom: 10px;
        max-width: 75%;
        display: inline-block;
    }
    .sent {
        background-color: #d1e7dd;
        text-align: right;
    }
    .received {
        background-color: #cfe2ff;
        text-align: left;
    }
    body {
        background-image: url("/static/assets/img/dw.jpg"); 
        background-size: cover;
        background-position: center;
        padding: 0;
        margin: 0;
        height: calc(100vh - 100px);
    }
</style>
</head>
<body>

<div class="container mt-5">
    <h3 class="text-center mb-4">Chat Box</h3>
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="chat-box">
                <div class="d-flex flex-column">
                    {% for row in data['msg'] %}
                        {% if row['sender_id']|int  == session['lid']|int  %}
                            <!-- Message sent by logged-in user/shop -->
                            <div  class="d-flex justify-content-end">
                                <div class="message sent">
                                    {{ row['message'] }}
                                </div>
                            </div>
                        {% else %}
                            <!-- Message received by logged-in user/shop -->
                            <div class="d-flex justify-content-start">
                                <div class="message received">
                                    {{ row['message'] }}
                                </div>
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
            <form method="post" class="mt-3">
                <div class="input-group">
                    <input type="text" class="form-control chat-input" name="msg" placeholder="Type your message..." required>
                    <button type="submit" name="submit" class="btn btn-success">Send Message</button>
                </div>
            </form>
        </div>
    </div>
</div>

</body>
<br><br><br>
{% include 'footer.html' %}
